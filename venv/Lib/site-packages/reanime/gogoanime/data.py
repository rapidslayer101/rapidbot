
import requests
from bs4 import BeautifulSoup
import re
from prettytable import PrettyTable

dic={}
animename={}
def get_data(anime):
	try:
		temp_url="https://gogoanime.ai/"
		r=requests.head(temp_url)
		url=r.headers['Location']
	except:
		temp_url="https://gogoanime.tv/"
		r=requests.head(temp_url)
		url=r.headers['Location']
	search_url=url+"/search.html?keyword="
	new_req=requests.get(search_url+anime).text
	soup=BeautifulSoup(new_req,'html.parser')
	page=soup.find('ul',attrs={'class':'pagination-list'})
	if page==None:
		pageno=1
	else:
		pageno=len(page)
	s=[]
	t=PrettyTable(['Code','Anime','Genre'])
	k=1
	for i in range(1,pageno+1):
		req=requests.get(search_url+anime+"&page="+str(i)).text
		bs=BeautifulSoup(req,'html.parser')
		ls=bs.find('ul',attrs={'class':'items'}).find_all('p',attrs={'class':'name'})
		for i in ls:
			temp=BeautifulSoup(str(i),'html.parser')
			link=url+temp.find('a').get('href')
			name=i.text
			dic[k]=link
			animename[k]=name
			if "Movie" in name:
				t.add_row([k,name,"Movie"])
			elif "OVA" in name or "Specials" in name:
				t.add_row([k,name,"OVA/Specials"])
			else:
				t.add_row([k,name,"Tv-Series"])
			k+=1
	t.align="l"
	print(t)
